// PowerDNS Bind backend configuration
// This file defines the zones that PowerDNS will serve using the bind backend
// 
// IMPORTANT: This uses PowerDNS bind backend syntax, not standard BIND9 syntax
// Security is handled at the PowerDNS level in pdns.conf, not here

options {
    directory "/etc/powerdns/zones";
};

{% if DEPLOY_ENV == 'production' %}
// Zone for geo-routing functionality (production)
zone "cdn-geo.runonflux.io" {
    type master;
    file "/etc/powerdns/zones/cdn-geo.runonflux.io.zone";
};
{% else %}
// Zone for geo-routing functionality (staging/dev)
zone "cdn-geodev.runonflux.io" {
    type master;
    file "/etc/powerdns/zones/cdn-geodev.runonflux.io.zone";
};
{% endif %}

// Zone for production app routing
// Handles all *.app.runonflux.io subdomains with character-based load balancing
zone "app.runonflux.io" {
    type master;
    file "/etc/powerdns/zones/app.runonflux.io.zone";
};

// Zone for staging app routing  
// Handles all *.app2.runonflux.io subdomains with character-based load balancing
zone "app2.runonflux.io" {
    type master;
    file "/etc/powerdns/zones/app2.runonflux.io.zone";
};